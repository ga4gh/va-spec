$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://w3id.org/ga4gh/schema/va-spec/1.x/profiles/caf/caf-source.yaml"
title: Cohort Allele Frequency
strict: true
imports:
  va.core: ../../core-im/core-im-source.yaml
  gks.core: ../../../gks-common/core-source.yaml
  vrs: ../../../vrs/vrs-source.yaml

namespaces:
  va.core: ../../core-im/core-im.json#/$defs/
  vrs: ../../../vrs/vrs.json#/$defs/

$defs:
  CohortAlleleFrequency:
    maturity: draft
    type: object
    inherits: va.core:InformationEntity
    description: >-
      A measure of the frequency of an Allele in a cohort.
    properties:
      derivedFrom:
        type: object
        description: Information about the dataset from which the CohortAlleleFrequency was reported.
        properties:
          id:
            type: string
            description: The identifier of the dataset.
          type:
            type: string
            description: The type of the dataset. (e.g. "DataSet")
          label:
            type: string
            description: A descriptive label for the dataset.
          version:
            type: string
            description: The version of the dataset.
        additionalProperties: false
      focusAllele:
        oneOf:
          - $refCurie: vrs:Allele
          - type: string
            format: uri-reference
        description: The Allele for which the frequency is being reported.
      focusAlleleCount:
        type: integer
        description: The number of occurrences of the focusAllele in the cohort.
      locusAlleleCount:
        type: integer
        description: >-
          The number of occurrences of alleles at the locus in the cohort
          (count of all alleles at this locus, sometimes referred to as "allele number").
      alleleFrequency:
        type: number
        description: The frequency of the focusAllele in the cohort.
      cohort:
        type: object
        properties:
          id:
            type: string
          label:
            type: string
          characteristics:
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                value:
                  type: string
              required:
                - name
                - value
              additionalProperties: false
        additionalProperties: false
        required:
          - id
        description: >-
          The cohort from which the frequency was derived.
      ancillaryResults:
        maturity: draft
        $comment: This field is different from most GKS objects by allowing any content to be added, and so is independently versioned.
        type: object
        additionalProperties: true
        description: >-
          Ancillary results that may be associated with the CohortAlleleFrequency,
          providing additional context or information.
      qualityMeasures:
        maturity: draft
        $comment: This field is different from most GKS objects by allowing any content to be added, and so is independently versioned.
        type: object
        additionalProperties: true
        description: >-
          Quality measures associated with the CohortAlleleFrequency and how it was
          derived, which may impact interpretation.
      subcohortFrequency:
        type: array
        ordered: false
        items:
          $ref: "#/$defs/CohortAlleleFrequency"
        description: >-
          A list of CohortAlleleFrequency objects describing subcohorts of the cohort currently being described.
          This creates a recursive relationship and subcohorts can be further subdivided into more subcohorts.
          This enables, for example, the description of different ancestry groups and sexes among those ancestry groups.
    required: [focusAllele, focusAlleleCount, locusAlleleCount, alleleFrequency, cohort]
    additionalProperties: false
